<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wiki Docs Index</title>
  <style>body{margin:0;padding:0 1.5rem 2rem;font-family:system-ui;color:#0f172a;background:#f8fafc;}table{width:100%;border-collapse:collapse;font-size:.94rem;}thead{background:rgba(15,23,42,.08);}th,td{padding:.6rem .5rem;border-bottom:1px solid rgba(15,23,42,.1);}tbody tr:hover{background:rgba(59,130,246,.1);}header{padding:1.5rem 0 1rem;}h1{margin:0 0 .5rem;font-size:clamp(1.6rem,2vw+1rem,2.2rem);}p.lead{margin:0 0 1.4rem;color:#475569;}input[type=search]{width:min(420px,100%);padding:.55rem .75rem;border-radius:8px;border:1px solid rgba(148,163,184,.6);}a{color:#2563eb;text-decoration:none;}a:hover{text-decoration:underline;}td.path{word-break:break-all;font-family:ui-monospace;}footer{margin-top:2rem;font-size:.82rem;color:#64748b;}</style>
</head>
<body>
  <header>
    <h1>Wiki Documentation Portal</h1>
    <p class="lead">Repository 문서를 한곳에서 검색하고 열람합니다.</p>
    <input type="search" id="filter" placeholder="문서 경로 검색..." />
    <div class="stats" id="stats"></div>
  </header>
  <table>
    <thead><tr><th>문서 경로</th><th>형식</th><th>크기</th></tr></thead>
    <tbody id="docs-body"></tbody>
  </table>
  <footer>docs-data.json 기준으로 최신 문서를 제공합니다.</footer>
<script>async function loadDocs(){const r=await fetch('docs-data.json',{cache:'no-store'});if(!r.ok)throw new Error('문서 데이터를 불러올 수 없습니다.');return (await r.json()).files||[];}function fmt(b){if(!b)return'0 B';const u=['B','KB','MB','GB'],i=Math.floor(Math.log(b)/Math.log(1024));const v=b/Math.pow(1024,i);return`${v.toFixed(v<10&&i>0?1:0)} ${u[i]}`;}function render(fs){const b=document.getElementById('docs-body');b.innerHTML='';fs.forEach(f=>{const tr=document.createElement('tr');const tdPath=document.createElement('td');tdPath.className='path';const link=document.createElement('a');link.href=`viewer.html?path=${encodeURIComponent(f.path)}`;link.textContent=f.path;tdPath.appendChild(link);tr.appendChild(tdPath);const tdExt=document.createElement('td');tdExt.textContent=f.ext.toUpperCase();tr.appendChild(tdExt);const tdSize=document.createElement('td');tdSize.textContent=fmt(f.size);tr.appendChild(tdSize);b.appendChild(tr);});document.getElementById('stats').textContent=`${fs.length.toLocaleString()}개 문서`; }function setup(fs){const input=document.getElementById('filter');input.addEventListener('input',()=>{const v=input.value.trim().toLowerCase();if(!v)return render(fs);render(fs.filter(f=>f.path.toLowerCase().includes(v)));});}loadDocs().then(fs=>{const sorted=fs.slice().sort((a,b)=>a.path.localeCompare(b.path));render(sorted);setup(sorted);}).catch(err=>{document.getElementById('docs-body').innerHTML=`<tr><td colspan="3">${err.message}</td></tr>`;});</script>
</body>
</html>
