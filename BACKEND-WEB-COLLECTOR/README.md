---
docsync: true
last_synced: 2025-09-29T16:53:19+0000
source_sha: 6a2ba831b9cb960224fc30ce929842efd6e77c25
coverage: 1.0
---
# ğŸš€ Hybrid Intelligent Crawling System

## ê°œìš”

í•˜ì´ë¸Œë¦¬ë“œ ì§€ëŠ¥í˜• í¬ë¡¤ë§ ì‹œìŠ¤í…œì€ AI ê¸°ë°˜ ì›¹ ìŠ¤í¬ë˜í•‘, êµ¬ì¡° í•™ìŠµ, ë³€ê²½ ê°ì§€ë¥¼ í†µí•©í•œ ì°¨ì„¸ëŒ€ í¬ë¡¤ë§ ì†”ë£¨ì…˜ì…ë‹ˆë‹¤.

## ğŸŒŸ ì£¼ìš” íŠ¹ì§•

### Phase 1: Foundation (ì™„ë£Œ)
- **Gemini AI í†µí•©**: ê°•ë ¥í•œ AI ë¶„ì„ ëŠ¥ë ¥
- **ë„ë©”ì¸ íŠ¹í™” í”„ë¡¬í”„íŠ¸**: ì—°ê¸ˆ ë„ë©”ì¸ ìµœì í™”
- **êµ¬ì¡°í™”ëœ íŒŒì‹±**: ë‹¤ì–‘í•œ ì‘ë‹µ í˜•ì‹ ì§€ì›
- **ScrapeGraphAI ìŠ¤íƒ€ì¼ ì›Œí¬í”Œë¡œìš°**: ê·¸ë˜í”„ ê¸°ë°˜ ìŠ¤í¬ë˜í•‘
- **AI êµ¬ì¡° í•™ìŠµ**: ìë™ í…œí”Œë¦¿ ìƒì„± ë° ìµœì í™”
- **ì§€ëŠ¥í˜• ë³€ê²½ ê°ì§€**: AI ê¸°ë°˜ ì¤‘ìš”ë„ í‰ê°€
- **ë³€ê²½ ì¤‘ìš”ë„ í‰ê°€**: ë‹¤ê°ë„ ë¶„ì„ ë° ì•Œë¦¼ ìš°ì„ ìˆœìœ„

### Phase 2: Orchestration (ì™„ë£Œ)
- **í†µí•© ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°**: ì¤‘ì•™ ì‘ì—… ê´€ë¦¬
- **ì›Œí¬í”Œë¡œìš° ì—”ì§„**: ë³µì¡í•œ ì‘ì—… ì‹œí€€ìŠ¤
- **ìŠ¤ì¼€ì¤„ëŸ¬**: Cron ë° ë‹¤ì–‘í•œ ìŠ¤ì¼€ì¤„ ì§€ì›
- **ì´ë²¤íŠ¸ ë²„ìŠ¤**: ë¹„ë™ê¸° ì´ë²¤íŠ¸ ê¸°ë°˜ í†µì‹ 
- **ìƒíƒœ ê´€ë¦¬**: ë‹¤ì–‘í•œ ì €ì¥ì†Œ ì§€ì›
- **ì—ëŸ¬ ì²˜ë¦¬**: ì„œí‚· ë¸Œë ˆì´ì»¤ & ì¬ì‹œë„ ì „ëµ

## ğŸ“¦ ì„¤ì¹˜

### 1. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
pip install -r requirements_hybrid.txt
```

### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

```bash
export GEMINI_API_KEY="your-gemini-api-key"
```

ë˜ëŠ” `.env` íŒŒì¼ ìƒì„±:

```
GEMINI_API_KEY=your-gemini-api-key
```

## ğŸ¯ ë¹ ë¥¸ ì‹œì‘

### ê¸°ë³¸ ì‚¬ìš©ë²•

```python
import asyncio
from hybrid_crawler_main import HybridCrawlerSystem

async def main():
    # ì‹œìŠ¤í…œ ì´ˆê¸°í™”
    system = HybridCrawlerSystem()
    await system.start()
    
    try:
        # ì›¹í˜ì´ì§€ ìŠ¤í¬ë˜í•‘
        result = await system.scrape(
            url="https://www.example.com",
            prompt="ì£¼ìš” ë‰´ìŠ¤ë¥¼ ì¶”ì¶œí•´ì£¼ì„¸ìš”"
        )
        print(result)
        
        # ê°ì„± ë¶„ì„
        sentiment = await system.analyze_sentiment(
            "ì´ í…ìŠ¤íŠ¸ì˜ ê°ì„±ì„ ë¶„ì„í•©ë‹ˆë‹¤."
        )
        print(sentiment)
        
        # ì›¹í˜ì´ì§€ ëª¨ë‹ˆí„°ë§
        monitor_id = await system.monitor(
            url="https://www.example.com",
            keywords=["ì¤‘ìš”", "ë³€ê²½"],
            interval_hours=1
        )
        print(f"Monitoring ID: {monitor_id}")
        
    finally:
        await system.stop()

asyncio.run(main())
```

### ì›Œí¬í”Œë¡œìš° ì‚¬ìš©

```python
async def workflow_example():
    system = HybridCrawlerSystem()
    await system.start()
    
    # ì›Œí¬í”Œë¡œìš° ìƒì„±
    builder = await system.create_workflow("ë‰´ìŠ¤ ë¶„ì„ ì›Œí¬í”Œë¡œìš°")
    
    # ìŠ¤í… ì¶”ê°€
    scrape_id = builder.add_action(
        "ìŠ¤í¬ë˜í•‘",
        lambda ctx: system.scrape(ctx['url'])
    )
    
    analyze_id = builder.add_action(
        "ë¶„ì„",
        lambda ctx: system.analyze_sentiment(ctx['content'])
    )
    
    # ìŠ¤í… ì—°ê²°
    builder.connect(scrape_id, analyze_id)
    
    # ì‹¤í–‰
    workflow = builder.build()
    result = await system.workflow_engine.execute_workflow(
        workflow,
        {"url": "https://example.com"}
    )
```

### ìŠ¤ì¼€ì¤„ë§

```python
# ë§¤ì¼ ì˜¤ì „ 9ì‹œì— ìŠ¤í¬ë˜í•‘
schedule_id = system.schedule_daily_scraping(
    url="https://www.example.com",
    hour=9,
    minute=0
)
```

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Orchestration Layer            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚Scheduler â”‚ â”‚Workflow  â”‚ â”‚Event   â”‚  â”‚
â”‚  â”‚          â”‚ â”‚Engine    â”‚ â”‚Bus     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚State     â”‚ â”‚Error     â”‚ â”‚Task    â”‚  â”‚
â”‚  â”‚Manager   â”‚ â”‚Handler   â”‚ â”‚Queue   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Foundation Layer              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚Gemini    â”‚ â”‚Scraper   â”‚ â”‚Templateâ”‚  â”‚
â”‚  â”‚Client    â”‚ â”‚Adapter   â”‚ â”‚Learner â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚Change    â”‚ â”‚Prompt    â”‚ â”‚Parser  â”‚  â”‚
â”‚  â”‚Detector  â”‚ â”‚Templates â”‚ â”‚System  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
BACKEND-WEB-COLLECTOR/
â”œâ”€â”€ orchestrator/           # Phase 2: ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
â”‚   â”œâ”€â”€ orchestrator.py     # ë©”ì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°
â”‚   â”œâ”€â”€ workflow_engine.py  # ì›Œí¬í”Œë¡œìš° ì—”ì§„
â”‚   â”œâ”€â”€ scheduler.py        # ìŠ¤ì¼€ì¤„ëŸ¬
â”‚   â”œâ”€â”€ event_bus.py        # ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ
â”‚   â”œâ”€â”€ state_manager.py    # ìƒíƒœ ê´€ë¦¬
â”‚   â””â”€â”€ error_handler.py    # ì—ëŸ¬ ì²˜ë¦¬
â”‚
â”œâ”€â”€ prompts/               # í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿
â”‚   â”œâ”€â”€ base.py
â”‚   â”œâ”€â”€ sentiment.py
â”‚   â”œâ”€â”€ absa.py
â”‚   â”œâ”€â”€ pension.py
â”‚   â”œâ”€â”€ news.py
â”‚   â”œâ”€â”€ structure.py
â”‚   â””â”€â”€ change.py
â”‚
â”œâ”€â”€ parsers/               # ì‘ë‹µ íŒŒì„œ
â”‚   â”œâ”€â”€ base_parser.py
â”‚   â”œâ”€â”€ gemini_parser.py
â”‚   â”œâ”€â”€ json_parser.py
â”‚   â””â”€â”€ structured_parser.py
â”‚
â”œâ”€â”€ gemini_client_v2.py    # Gemini AI í´ë¼ì´ì–¸íŠ¸
â”œâ”€â”€ scrapegraph_adapter_v2.py  # ìŠ¤í¬ë˜í•‘ ì–´ëŒ‘í„°
â”œâ”€â”€ template_learner.py    # í…œí”Œë¦¿ í•™ìŠµ
â”œâ”€â”€ change_detection_v2.py # ë³€ê²½ ê°ì§€
â”œâ”€â”€ change_evaluator.py    # ì¤‘ìš”ë„ í‰ê°€
â””â”€â”€ hybrid_crawler_main.py # ë©”ì¸ í†µí•© í´ë˜ìŠ¤
```

## ğŸ”§ ì£¼ìš” ì»´í¬ë„ŒíŠ¸

### 1. Gemini AI Client
- ë‹¤ì–‘í•œ ë¶„ì„ íƒ€ì… ì§€ì›
- ë¹„ë™ê¸° ì²˜ë¦¬
- ì¬ì‹œë„ ë¡œì§

### 2. ScrapeGraph Adapter
- ê·¸ë˜í”„ ê¸°ë°˜ ì›Œí¬í”Œë¡œìš°
- AI êµ¬ì¡° í•™ìŠµ
- í•˜ì´ë¸Œë¦¬ë“œ ì „ëµ

### 3. Template Learner
- ìë™ êµ¬ì¡° ë¶„ì„
- í…œí”Œë¦¿ ìµœì í™”
- ë²„ì „ ê´€ë¦¬

### 4. Change Detection
- ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
- ì´ë²¤íŠ¸ ê¸°ë°˜ ì•Œë¦¼
- ì¤‘ìš”ë„ í‰ê°€

### 5. Orchestrator
- ì¤‘ì•™ ì‘ì—… ê´€ë¦¬
- ìš°ì„ ìˆœìœ„ í
- ë¹„ë™ê¸° ì›Œì»¤ í’€

### 6. Workflow Engine
- ë³µì¡í•œ ì‹œí€€ìŠ¤ ì‹¤í–‰
- ì¡°ê±´ë¶€/ë³‘ë ¬ ì‹¤í–‰
- ì„œë¸Œ ì›Œí¬í”Œë¡œìš°

## ğŸ“Š ëª¨ë‹ˆí„°ë§

ì‹œìŠ¤í…œ í†µê³„ ì¡°íšŒ:

```python
stats = system.get_statistics()
print(stats)
```

ì¶œë ¥ ì˜ˆì‹œ:
```json
{
  "orchestrator": {
    "tasks_created": 42,
    "tasks_completed": 38,
    "tasks_failed": 2,
    "queue_size": 2
  },
  "scheduler": {
    "total_jobs": 5,
    "running_jobs": 1,
    "scheduled_jobs": 4
  },
  "event_bus": {
    "events_published": 156,
    "events_processed": 154
  }
}
```

## ğŸ§ª í…ŒìŠ¤íŠ¸

```bash
# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
pytest tests/

# ì»¤ë²„ë¦¬ì§€ í¬í•¨
pytest --cov=. tests/

# íŠ¹ì • í…ŒìŠ¤íŠ¸
pytest tests/test_gemini_client_v2.py
```

## ğŸš€ ì„±ëŠ¥ ìµœì í™”

- **ë¹„ë™ê¸° ì²˜ë¦¬**: ëª¨ë“  I/O ì‘ì—… ë¹„ë™ê¸°í™”
- **ì›Œì»¤ í’€**: ë™ì‹œ ì‘ì—… ì²˜ë¦¬
- **ìºì‹±**: í…œí”Œë¦¿ ë° ê²°ê³¼ ìºì‹±
- **ì¬ì‹œë„ ì „ëµ**: ì§€ëŠ¥ì  ë°±ì˜¤í”„
- **ì„œí‚· ë¸Œë ˆì´ì»¤**: ì¥ì•  ê²©ë¦¬

## ğŸ“ ë¼ì´ì„¼ìŠ¤

MIT License

## ğŸ¤ ê¸°ì—¬

ê¸°ì—¬ë¥¼ í™˜ì˜í•©ë‹ˆë‹¤! PRì„ ë³´ë‚´ì£¼ì„¸ìš”.

## ğŸ“® ë¬¸ì˜

ì´ìŠˆë¥¼ í†µí•´ ë¬¸ì˜í•´ì£¼ì„¸ìš”.
